# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –¥–ª—è:
- **–ö–ª–∏–µ–Ω—Ç–æ–≤**: –æ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–∞—Ö, —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å—Ç–∞—Ç—É—Å–æ–≤, –Ω–æ–≤—ã—Ö —Å—á–µ—Ç–∞—Ö
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤**: –æ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–∞—Ö –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –≤ —Ç–∏–∫–µ—Ç–∞—Ö –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@BotFather`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
   - –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –¥–ª—è –±–æ—Ç–∞ (–≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–∞–º)
   - –ü—Ä–∏–¥—É–º–∞–π—Ç–µ username –¥–ª—è –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `_bot`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Å—ã–ª–∫–∞—Ö)
4. BotFather –≤—ã–¥–∞—Å—Ç –≤–∞–º **—Ç–æ–∫–µ–Ω** –≤–∏–¥–∞: `123456789:ABCdefGHIjklmNOpqrsTuvwxyzABCdeFGhI`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω, –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```env
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklmNOpqrsTuvwxyzABCdeFGhI
TELEGRAM_BOT_USERNAME=your_bot_username
APP_URL=http://localhost:5001
```

–ì–¥–µ:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç BotFather
- `TELEGRAM_BOT_USERNAME` - username –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–±–µ–∑ @)
- `APP_URL` - URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR –∫–æ–¥–æ–≤ –∏ —Å—Å—ã–ª–æ–∫

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd server
npm start
```

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
‚úÖ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–≤–æ–π **Dashboard**
2. –ù–∞—Ö–æ–¥–∏—Ç –≤–∏–¥–∂–µ—Ç "Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–í–∫–ª—é—á–∏—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
4. –°–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ
5. –í Telegram –±–æ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `/start` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
6. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω—ã!"
7. –ù–∞ –¥–∞—à–±–æ—Ä–¥–µ –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram

### –ö–∞–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç

1. **üé´ –ù–æ–≤—ã–π —Ç–∏–∫–µ—Ç** - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–∏–∫–µ—Ç–∞
2. **üí¨ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–∏–∫–µ—Ç–µ** - –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. **üìã –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–∏–∫–µ—Ç–∞** - –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞ (–û—Ç–∫—Ä—ã—Ç ‚Üí –í —Ä–∞–±–æ—Ç–µ ‚Üí –†–µ—à–µ–Ω ‚Üí –ó–∞–∫—Ä—ã—Ç)
4. **üí∞ –ù–æ–≤—ã–π —Å—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É** - –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Å—á–µ—Ç–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ **–ü—Ä–æ—Ñ–∏–ª—å** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Telegram**
2. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–í–∫–ª—é—á–∏—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –°–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ
4. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

### –ö–∞–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

1. **üé´ –ù–æ–≤—ã–π —Ç–∏–∫–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞**
2. **üí¨ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–∏–∫–µ—Ç–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞**

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ **–∫–∞—Ä—Ç–æ—á–∫—É –∫–ª–∏–µ–Ω—Ç–∞**
2. –ï—Å–ª–∏ —É –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω Telegram (–∫–Ω–æ–ø–∫–∞ "üí¨ Telegram" –≤–∏–¥–Ω–∞), –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –Ω–µ—ë
3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
4. –í–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. –ù–∞–∂–∏–º–∞–µ—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
6. –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –≤ Telegram

## API –º–∞—Ä—à—Ä—É—Ç—ã

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –∏ QR –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
POST /api/telegram/client/generate-link
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "deepLink": "https://t.me/your_bot?start=token123",
  "qrCode": "data:image/png;base64,...",
  "botUsername": "your_bot"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
GET /api/telegram/client/status
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "connected": true,
  "enabled": true,
  "username": "john_doe"
}
```

#### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```
POST /api/telegram/client/disconnect
```

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤/—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –∏ QR –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
POST /api/telegram/user/generate-link
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
GET /api/telegram/user/status
```

#### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```
POST /api/telegram/user/disconnect
```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É
```
POST /api/telegram/client/:clientId/send-message
Content-Type: application/json

{
  "message": "–ü—Ä–∏–≤–µ—Ç! –í–∞—à —Ç–∏–∫–µ—Ç –≥–æ—Ç–æ–≤."
}
```

## –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

- **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**: `<b>—Ç–µ–∫—Å—Ç</b>` –∏–ª–∏ `<strong>—Ç–µ–∫—Å—Ç</strong>`
- **–ö—É—Ä—Å–∏–≤**: `<i>—Ç–µ–∫—Å—Ç</i>` –∏–ª–∏ `<em>—Ç–µ–∫—Å—Ç</em>`
- *–ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ*: `<u>—Ç–µ–∫—Å—Ç</u>`
- *–ó–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ*: `<s>—Ç–µ–∫—Å—Ç</s>`
- *–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç*: `<code>—Ç–µ–∫—Å—Ç</code>`
- *–ë–ª–æ–∫ –∫–æ–¥–∞*: `<pre>—Ç–µ–∫—Å—Ç</pre>`
- *–°—Å—ã–ª–∫–∞*: `<a href="url">—Ç–µ–∫—Å—Ç</a>`

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ:**
```javascript
// –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
const message = `<b>–í–∞–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</b>`;

// –° –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ —Å—Ç—Ä–æ–∫
const message = `<b>–ó–∞–≥–æ–ª–æ–≤–æ–∫</b>\n\n–û–ø–∏—Å–∞–Ω–∏–µ...`;

// –°–º–µ—à–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
const message = `üé´ <b>–ù–æ–≤—ã–π —Ç–∏–∫–µ—Ç</b>\n\n–ö–ª–∏–µ–Ω—Ç: <b>CompanyName</b>\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${ticketTitle}`;
```

## –¢–∞–±–ª–∏—Ü—ã –ë–î

### client_telegram
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ Telegram –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
- `client_id` - ID –∫–ª–∏–µ–Ω—Ç–∞
- `telegram_user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- `telegram_username` - username –≤ Telegram
- `connection_token` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `enabled` - –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (0/1)
- `created_at` / `updated_at` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

### user_telegram
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ Telegram –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤/—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤:
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã
- `telegram_user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- `telegram_username` - username –≤ Telegram
- `connection_token` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `enabled` - –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (0/1)
- `created_at` / `updated_at` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

### telegram_notifications_queue
–û—á–µ—Ä–µ–¥—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ retry-–º–µ—Ö–∞–Ω–∏–∑–º–∞:
- `recipient_type` - —Ç–∏–ø –ø–æ–ª—É—á–∞—Ç–µ–ª—è ('client' –∏–ª–∏ 'user')
- `recipient_id` - ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `notification_type` - —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `reference_id` - ID –æ–±—ä–µ–∫—Ç–∞ (—Ç–∏–∫–µ—Ç, —Å—á–µ—Ç –∏ —Ç.–¥.)
- `sent` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–∏ (0/1)
- `sent_at` - –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `error` - —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ

## –ü–æ–∏—Å–∫ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `TELEGRAM_BOT_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–≤–∑—è—Ç –æ—Ç BotFather)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### QR –∫–æ–¥ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç `qrcode`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `APP_URL` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª `/start` –≤ –±–æ—Ç–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `enabled = 1` –≤ —Ç–∞–±–ª–∏—Ü–µ `client_telegram` –∏–ª–∏ `user_telegram`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Telegram user ID —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ "–ö–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª Telegram"
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤–∫–ª—é—á–∏—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–µ–º –¥–∞—à–±–æ—Ä–¥–µ

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_botfather
TELEGRAM_BOT_USERNAME=–≤–∞—à_bot_username

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
APP_URL=http://localhost:5001
NODE_ENV=development
PORT=5001
JWT_SECRET=your-secret-key
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
server/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ telegramBot.js           # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ telegramNotifications.js # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ telegram.js              # API –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è Telegram
‚îÇ   ‚îú‚îÄ‚îÄ tickets.js               # –ú–∞—Ä—à—Ä—É—Ç—ã —Ç–∏–∫–µ—Ç–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ invoices.js              # –ú–∞—Ä—à—Ä—É—Ç—ã —Å—á–µ—Ç–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ index.js                     # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

client/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ widgets/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ TelegramNotificationsWidget.js  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ       ‚îú‚îÄ‚îÄ client/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Dashboard.js                    # –î–∞—à–±–æ—Ä–¥ –∫–ª–∏–µ–Ω—Ç–∞ —Å –≤–∏–¥–∂–µ—Ç–æ–º
‚îÇ       ‚îî‚îÄ‚îÄ admin/
‚îÇ           ‚îú‚îÄ‚îÄ AdminProfile.js                 # –ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∞ —Å Telegram –≤–∫–ª–∞–¥–∫–æ–π
‚îÇ           ‚îî‚îÄ‚îÄ ClientDetail.js                 # –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```javascript
// –í –º–∞—Ä—à—Ä—É—Ç–µ –∏–ª–∏ –≥–¥–µ —É–≥–æ–¥–Ω–æ –≥–¥–µ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ db
const { notifyClientNewTicket } = require('../lib/telegramNotifications');

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
await notifyClientNewTicket(db, clientId, ticketId, '–ù–æ–≤—ã–π —Ç–∏–∫–µ—Ç');

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω—É
const { notifyAdminNewTicket } = require('../lib/telegramNotifications');
await notifyAdminNewTicket(db, adminUserId, clientName, ticketId, title, description);
```

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –í–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Dashboard / –ü—Ä–æ—Ñ–∏–ª—å
2. –ù–∞–∂–∞—Ç—å "–í–∫–ª—é—á–∏—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR –∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ
4. –í —á–∞—Ç–µ —Å –±–æ—Ç–æ–º –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ `/start`
5. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/start`
6. –ü–æ–¥–æ–∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç "‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω—ã!"
7. –ù–∞ —Å–∞–π—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Ç–æ–∫–µ–Ω—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã
- –¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏)
- Telegram user ID –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç, —Ç–æ–ª—å–∫–æ username
- –í—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
